\iffalse
Return-Path: <zhaohscas@yahoo.com.cn>
Received: from compute1.internal (compute1.internal [10.202.2.41])
	 by store65m.internal (Cyrus v2.3.13-fmsvn17160) with LMTPA;
	 Mon, 08 Dec 2008 10:15:19 -0500
X-Sieve: CMU Sieve 2.3
X-Spam-score: 0.0
X-Spam-hits: BAYES_50 0.001, UNPARSEABLE_RELAY 0.001, BAYES_USED global
X-Spam-source: IP='81.169.145.136', Host='post.strato.de', Country='DE', FromHeader='cn',
  MailFrom='cn'
X-Spam-charsets: plain='us-ascii'
X-Resolved-to: sommerfee@f-m.fm
X-Mail-from: zhaohscas@yahoo.com.cn
Received: from imap12.internal ([10.202.2.62])
  by compute1.internal (LMTPProxy); Mon, 08 Dec 2008 10:15:19 -0500
Received: from post.strato.de [81.169.145.136] by messagingengine.com
  with POP3 for sommerfee@f-m.fm; Mon, 08 Dec 2008 10:15:18 -0500
X-DeliveredInternalDate: Mon, 8 Dec 2008 22:07:48 +0800
X-LinkName: sommerfee.de
X-Envelope-From: <zhaohscas@yahoo.com.cn>
X-Envelope-To: <ml@axel-sommerfeldt.de>
X-Delivery-Time: 1228745274
X-UID: 8429
X-RZG-FWD-BY: caption@sommerfee.de
Received: from localhost (client mail forwarder)
	by mailin.webmailer.de (zeb mi58) (RZmta 18.0)
	for <ml@axel-sommerfeldt.de>; Mon, 8 Dec 2008 15:07:54 +0100 (MET)
X-RZG-CLASS-ID: mi
Received: from yahoo.com.cn. ([159.226.135.215])
	by mailin.webmailer.de (zeb mi58) (RZmta 18.0)
	with SMTP id 606b5akB8E5G3v for <caption@sommerfee.de>;
	Mon, 8 Dec 2008 15:07:53 +0100 (MET)
Received-Path: <zhaohscas@yahoo.com.cn>
Received: from localhost[127.0.0.1] (helo=127.0.0.1) by localhost[127.0.0.1]
 with esmtp (QK SMTP Server 3);Mon, 8 Dec 2008 22:07:48 +0800
Date: Mon, 8 Dec 2008 22:07:48 +0800
From: Hongsheng Zhao <zhaohscas@yahoo.com.cn>
Organization: Chinese Academy of Sciences
X-Priority: 3 (Normal)
Message-ID: <1905206967.20081208220748@yahoo.com.cn>
To: caption@sommerfee.de
Subject: backref doesn't work with threeparttable and caption package.
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Dear Axel,

Consider the following example:

-----------------------------
\documentclass{book}
\usepackage{caption}
\usepackage{threeparttable}
\usepackage[backref=page]{hyperref}

\begin{document}
\begin{table}[htbp]
\centering
\caption{foo}
\begin{threeparttable}
\begin{tabular}{l}
\hline
Approach $^a$\\
\hline
\end{tabular}
\begin{tablenotes}
\footnotesize
\item[a] Ref. \cite{foo}.
\end{tablenotes}
\end{threeparttable}
\end{table}

\begin{thebibliography}{1}
\bibitem{foo}
foo

\end{thebibliography}

\end{document}
-----------------------------

The above example will give me the following errors:

------------------------------------
(backref_threeparttable.brf
! Argument of \@gobbletwo has an extra }.
<inserted text>
                \par
l.1 ... {??}{ on input line 18}}{table.caption.2}}

?
------------------------------------

But when I comment the following line out, it will works fine:

%\usepackage[backref=page]{hyperref}

Why does this happen, any hints will be highly appreciated.

Regards,
-- 
Hongsheng Zhao <zhaohscas@yahoo.com.cn> 
Xinjiang Technical Institute of Physics and Chemistry
Chinese Academy of Sciences 
GnuPG DSA: 0xD108493
2008-12-8
\fi

\documentclass{book}
\usepackage{caption}
\usepackage{threeparttable}
\usepackage[backref=page]{hyperref}

%\usepackage{makerobust}
%\makeatletter
%\MakeRobustCommand\caption@xref
%\makeatother

\begin{document}
\begin{table}[htbp]
\centering
\caption{foo}
\begin{threeparttable}
\begin{tabular}{l}
\hline

Approach $^a$\\
\hline
\end{tabular}
\begin{tablenotes}
\footnotesize
\item[a] Ref. \cite{foo}.
\end{tablenotes}
\end{threeparttable}
\end{table}

\begin{thebibliography}{1}
\bibitem{foo}
foo

\end{thebibliography}

\end{document}
