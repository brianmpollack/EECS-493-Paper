% Ticket #14 "Newly defined floating environments do not support the "autodot" feature offered by KOMA-Script"
% https://sourceforge.net/p/latex-caption/tickets/14/

\iffalse
As my question is closely related - the major difference being that I do want the trailing period - I hope it's ok to use this thread instead of starting a new one.

localghost wrote:
Set the option numbers=noenddot for the document class. Other possible settings for this option can be found in Table 3.14 of the KOMA-Script user guide (English version).

This option will (unfortunately) not work for custom floats created with "newfloat" (see also viewtopic.php?f=45&t=23028). These floats will never add a period after the reference number. I did not find any hints in the documentation of newfloat or caption on how to change this.

Is there any way to
1. apply the KOMA setting to these floats as well?
2. add the trailing period to custom floats "manually"?

Here's a MWE:
\fi

\documentclass[english,numbers=enddot] {scrbook}
\usepackage[T1]{fontenc}

\usepackage{listings}
\lstset{frame=single,aboveskip=0pt,belowskip=0pt}

\usepackage{caption,newfloat}
\DeclareFloatingEnvironment[
  fileext=lol,
  name=Listing
]{listing}

\begin{document}
\chapter{foo}
\begin{figure}[!h]
  \centering
  \rule{\textwidth}{7mm}
  \caption{Figure}
\end{figure}

\begin{listing}[!h]
  \begin{lstlisting}[gobble=4]
    Some code
  \end{lstlisting}
  \caption{Listing}
\end{listing}

\end{document}
